% Generated by roxygen2 (4.1.1): do not edit by hand
% Please edit documentation in R/metab_sim.R
\name{metab_sim}
\alias{metab_sim}
\title{Simulate dissolved oxygen data from input data}
\usage{
metab_sim(data = mm_data(local.time, DO.obs, DO.sat, depth, temp.water, light,
  optional = "DO.obs"), data_daily = mm_data(local.date, DO.mod.1, GPP, ER,
  K600, optional = "DO.mod.1"), model_specs = specs_sim_basic(),
  info = NULL, day_start = -1.5, day_end = 30, tests = c("full_day",
  "even_timesteps", "complete_data"))
}
\arguments{
\item{data}{data.frame of input data at the temporal resolution of raw
observations. Columns must have the same names, units, and format as the
default. See \code{\link{mm_data}} for a full data description.}

\item{data_daily}{data.frame containing inputs with a daily timestep. See
\code{\link{mm_data}} for a full data description.}

\item{model_specs}{a list of model specifications and parameters for a model.
Although this may be specified manually, it is easier to use a predefined
function from the \code{specs_xxx} family with a name beginning with
"specs_xxx", where "xxx" is the model type - e.g., "mle", "bayes", "night",
etc. The help files for those functions list the necessary parameters,
describe them in detail, and give default values.}

\item{info}{any information, in any format, that you would like to store
within the metab_model object}

\item{day_start}{start time of a day's data in number of hours from the
midnight that begins the modal date. For example, day_start=-1.5 indicates
that data describing 2006-06-26 begin at 2006-06-25 22:30, or at the first
observation time that occurs after that time if day_start doesn't fall
exactly on an observation time.}

\item{day_end}{end time of a day's data in number of hours from the midnight
that begins the modal date. For example, day_end=30 indicates that data
describing 2006-06-26 end at 2006-06-27 06:00, or at the last observation
time that occurs before that time if day_end doesn't fall exactly on an
observation time.}

\item{tests}{list of tests to conduct}
}
\value{
A metab_sim object containing the fitted model.
}
\description{
Takes input data in the form of a sub-daily time series (\code{data}) of
DO.sat, depth, temperature, and light, and a daily time series
(\code{data_daily}) of GPP, ER, and K600 values, and turns these into
simulated DO.obs. Either \code{data} or \code{data_daily} should specify a
starting DO.obs value for each day; if in \code{data}, this takes the form of
a DO.obs column with values on at least the first time point of each day (all
other values are ignored), or if in \code{data_daily}, this takes the form of
a DO.mod.1 column with one starting DO value per day.
}
\examples{
# set the date in several formats
start.chron <- chron::chron(dates="08/23/12", times="22:00:00")
end.chron <- chron::chron(dates="08/25/12", times="06:00:00")
start.posix <- as.POSIXct(format(start.chron, "\%Y-\%m-\%d \%H:\%M:\%S"), tz="Etc/GMT+7")
end.posix <- as.POSIXct(format(end.chron, "\%Y-\%m-\%d \%H:\%M:\%S"), tz="Etc/GMT+7")
mid.date <- as.Date(start.posix + (end.posix - start.posix)/2)
start.numeric <- as.numeric(start.posix - as.POSIXct(format(mid.date, "\%Y-\%m-\%d 00:00:00"),
   tz="Etc/GMT+7"), units='hours')
end.numeric <- as.numeric(end.posix - as.POSIXct(format(mid.date, "\%Y-\%m-\%d 00:00:00"),
  tz="Etc/GMT+7"), units='hours')

# get, format, & subset data
vfrench <- streamMetabolizer:::load_french_creek(attach.units=FALSE)
vfrenchshort <- vfrench[vfrench$local.time >= start.posix & vfrench$local.time <= end.posix, ]
vdaily <- data.frame(local.date="2012-08-24", GPP=4, ER=8, K600=5, stringsAsFactors=FALSE)

# sim
mm <- metab_sim(data=vfrenchshort, data_daily=vdaily,
  day_start=start.numeric, day_end=end.numeric, model_specs=specs_sim_basic(err.proc.sigma=0.07))
get_fit(mm)
get_data_daily(mm)
get_fitting_time(mm)
plot_DO_preds(predict_DO(mm))
plot_DO_preds(predict_DO(mm))
\dontrun{
 metab_sim(data=data.frame(empty="shouldbreak"))
}
}
\author{
Alison Appling, Maite Arroita
}
\seealso{
Other metab_model: \code{\link{metab_Kvpred}};
  \code{\link{metab_bayes}}; \code{\link{metab_mle}};
  \code{\link{metab_night}}
}

